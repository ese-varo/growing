container = document.getElementById("note");
note = document.getElementById("note-description");
addNoteButton = document.getElementById("add-note-btn");
editNoteButton = document.getElementById("edit-note-btn");
deleteNoteButton = document.getElementById("delete-note-btn");
formNote = document.getElementById("form-note");
formEditNote = document.getElementById("form-edit-note");
if("<%= @note %>") {
  note.innerText = "<%= @note.description if @note %>";
  formEditNote.action = '/days/' + "<%= @day_habit.id %>" + "/note/" + "<%= @note.id if @note %>";
  formEditNote.setAttribute('data-remote', true);
  if (!editNoteButton) {
    container.appendChild(editButtonNote());
  }

  if (!deleteNoteButton) {
    container.appendChild(deleteButtonNote());
  }

  if (addNoteButton) {
    addNoteButton.remove();
  }
} else {
  note.innerText = "You don't have a note yet"
  formNote.action = "/days/" + "<%= @day_habit.id %>" + "/note";
  formNote.setAttribute('data-remote', true);
  if (!addNoteButton) {
    container.appendChild(createButonNote());
  }
  if (editNoteButton) {
    editNoteButton.remove();
  }
  if (deleteNoteButton) {
    deleteNoteButton.remove();
  }

}

function createButonNote() {
  let button = document.createElement("button");
  button.id = "add-note-btn"
  button.className = "btn btn-primary";
  button.setAttribute('data-bs-toggle', "modal");
  button.setAttribute('data-bs-target', "#staticBackdrop");
  button.innerText = "Add a note";
  return button;
}

function editButtonNote() { 
  let button = document.createElement("button");
  button.id = "edit-note-btn"
  button.className = "btn btn-secondary";
  button.setAttribute('data-bs-toggle', "modal");
  button.setAttribute('data-bs-target', "#staticBackdropEdit");
  button.innerText = "Edit the note";
  return button;
}

function deleteButtonNote() { 
  let button = document.createElement("a");
  button.id = "delete-note-btn"
  button.className = "btn btn-danger";
  button.innerText = "Delete the note";
  button.href = "/note/" + "<%= @note.id if @note %>";
  button.setAttribute("data-method", "delete");
  return button;
}
